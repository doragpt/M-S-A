(venv) root@vm-b3dba883-74:~/M-S-A# python main.py
テンプレートディレクトリ: /root/M-S-A/templates
静的ファイルディレクトリ: /root/M-S-A/static
2025-03-17 03:19:20,657 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:19:20,661 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:19:20,661 - apscheduler.scheduler - INFO - Added job "scheduled_scrape" to job store "default"
2025-03-17 03:19:20,662 - apscheduler.scheduler - INFO - Added job "<lambda>" to job store "default"
2025-03-17 03:19:20,662 - apscheduler.scheduler - INFO - Scheduler started
2025-03-17 03:19:20,662 - apscheduler.scheduler - DEBUG - Looking for jobs to run
サーバー起動時刻（JST）: 2025-03-17 03:19:20 JST+0900
アプリケーションを起動しています: http://0.0.0.0:5000
2025-03-17 03:19:20,670 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-03-17 04:19:20.656838+09:00 (in 3599.986043 seconds)
既存データ: 2942件
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Serving Flask app 'main'
 * Debug mode: on
2025-03-17 03:19:20,684 - werkzeug - INFO -  * Running on all addresses (0.0.0.0)
   WARNING: This is a development server. Do not use it in a production deployment.
 * Running on http://127.0.0.1:5000
 * Running on http://160.251.196.100:5000 (Press CTRL+C to quit)
2025-03-17 03:19:20,684 - werkzeug - INFO -  * Restarting with stat
テンプレートディレクトリ: /root/M-S-A/templates
静的ファイルディレクトリ: /root/M-S-A/static
2025-03-17 03:19:21,514 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:19:21,519 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:19:21,519 - apscheduler.scheduler - INFO - Added job "scheduled_scrape" to job store "default"
2025-03-17 03:19:21,519 - apscheduler.scheduler - INFO - Added job "<lambda>" to job store "default"
2025-03-17 03:19:21,519 - apscheduler.scheduler - INFO - Scheduler started
2025-03-17 03:19:21,520 - apscheduler.scheduler - DEBUG - Looking for jobs to run
サーバー起動時刻（JST）: 2025-03-17 03:19:21 JST+0900
2025-03-17 03:19:21,525 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-03-17 04:19:21.514119+09:00 (in 3599.988811 seconds)
アプリケーションを起動しています: http://0.0.0.0:5000
既存データ: 2942件
2025-03-17 03:19:21,539 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 03:19:21,543 - werkzeug - INFO -  * Debugger PIN: 452-729-233
2025-03-17 03:19:25,268 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:25] "GET / HTTP/1.1" 200 -
2025-03-17 03:19:25,419 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:25,436 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:25] "GET /api/data HTTP/1.1" 200 -
2025-03-17 03:19:27,387 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:27,389 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:27] "GET /api/store-names HTTP/1.1" 200 -
2025-03-17 03:19:30,606 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:30,607 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:30] "GET /api/history/optimized?store=AQUA&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:19:32,084 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:32,084 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:32] "GET /api/history/optimized?store=AQUA&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:19:33,207 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:33,208 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:33] "GET /api/history/optimized?start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:19:36,356 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:36] "GET / HTTP/1.1" 200 -
2025-03-17 03:19:37,962 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:37,963 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:37] "GET /api/history/optimized?start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:19:44,165 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:44,166 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:44] "GET /api/history/optimized?store=AROMA%20TIGER%20恵比寿店&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:19:46,940 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:46,945 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:46] "GET /api/area-stats HTTP/1.1" 200 -
2025-03-17 03:19:48,139 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:48,139 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:48,140 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:48] "GET /api/ranking/average?biz_type=エステ・アロマ&limit=15 HTTP/1.1" 200 -
2025-03-17 03:19:48,141 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:48] "GET /api/ranking/genre?biz_type=エステ・アロマ HTTP/1.1" 200 -
2025-03-17 03:19:49,452 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:49,455 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:49] "GET /api/averages/weekly HTTP/1.1" 200 -
2025-03-17 03:19:54,667 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:54,670 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:54] "GET /api/averages/weekly HTTP/1.1" 200 -
2025-03-17 03:19:58,115 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:19:58,118 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:19:58] "GET /api/averages/weekly HTTP/1.1" 200 -
2025-03-17 03:20:05,542 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:20:05,544 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:20:05] "GET /api/store-names HTTP/1.1" 200 -
2025-03-17 03:20:25,213 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:20:25,216 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:20:25] "GET /api/averages/weekly HTTP/1.1" 200 -
^Z
[10]+  Stopped                 python main.py
(venv) root@vm-b3dba883-74:~/M-S-A# git fetch origin main
.pyremote: Enumerating objects: 10, done.
remote: Counting objects: 100% (10/10), done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 7 (delta 4), reused 7 (delta 4), pack-reused 0 (from 0)
Unpacking objects: 100% (7/7), 2.30 KiB | 786.00 KiB/s, done.
From https://github.com/doragpt/M-S-A
 * branch            main       -> FETCH_HEAD
   7d5f458..1286e70  main       -> origin/main
(venv) root@vm-b3dba883-74:~/M-S-A# git checkout origin/main -- api_endpoints.py
(venv) root@vm-b3dba883-74:~/M-S-A# kill -9 $(lsof -t -i:5000)
(venv) root@vm-b3dba883-74:~/M-S-A# python main.py
テンプレートディレクトリ: /root/M-S-A/templates
静的ファイルディレクトリ: /root/M-S-A/static
2025-03-17 03:21:53,226 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:21:53,231 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:21:53,231 - apscheduler.scheduler - INFO - Added job "scheduled_scrape" to job store "default"
2025-03-17 03:21:53,231 - apscheduler.scheduler - INFO - Added job "<lambda>" to job store "default"
2025-03-17 03:21:53,231 - apscheduler.scheduler - INFO - Scheduler started
2025-03-17 03:21:53,232 - apscheduler.scheduler - DEBUG - Looking for jobs to run
サーバー起動時刻（JST）: 2025-03-17 03:21:53 JST+0900
2025-03-17 03:21:53,236 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-03-17 04:21:53.226346+09:00 (in 3599.989519 seconds)
アプリケーションを起動しています: http://0.0.0.0:5000
既存データ: 2942件
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Serving Flask app 'main'
 * Debug mode: on
2025-03-17 03:21:53,253 - werkzeug - INFO -  * Running on all addresses (0.0.0.0)
   WARNING: This is a development server. Do not use it in a production deployment.
 * Running on http://127.0.0.1:5000
 * Running on http://160.251.196.100:5000 (Press CTRL+C to quit)
2025-03-17 03:21:53,253 - werkzeug - INFO -  * Restarting with stat
テンプレートディレクトリ: /root/M-S-A/templates
静的ファイルディレクトリ: /root/M-S-A/static
2025-03-17 03:21:54,098 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:21:54,102 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 03:21:54,103 - apscheduler.scheduler - INFO - Added job "scheduled_scrape" to job store "default"
2025-03-17 03:21:54,103 - apscheduler.scheduler - INFO - Added job "<lambda>" to job store "default"
2025-03-17 03:21:54,103 - apscheduler.scheduler - INFO - Scheduler started
2025-03-17 03:21:54,104 - apscheduler.scheduler - DEBUG - Looking for jobs to run
サーバー起動時刻（JST）: 2025-03-17 03:21:54 JST+0900
2025-03-17 03:21:54,109 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-03-17 04:21:54.098370+09:00 (in 3599.989106 seconds)
アプリケーションを起動しています: http://0.0.0.0:5000
既存データ: 2942件
2025-03-17 03:21:54,122 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 03:21:54,126 - werkzeug - INFO -  * Debugger PIN: 452-729-233
2025-03-17 03:21:58,334 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:21:58] "GET / HTTP/1.1" 200 -
2025-03-17 03:22:00,215 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:22:00,220 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:22:00] "GET /api/averages/weekly HTTP/1.1" 200 -
2025-03-17 03:22:02,939 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:22:02,945 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:22:02] "GET /api/averages/weekly HTTP/1.1" 200 -
2025-03-17 03:22:07,351 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:22:07,353 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:22:07] "GET /api/area-stats HTTP/1.1" 200 -
2025-03-17 03:22:07,710 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:22:07,711 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:22:07] "GET /api/history/optimized?start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:22:09,384 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:22:09,387 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:22:09] "GET /api/store-names HTTP/1.1" 200 -
2025-03-17 03:22:12,092 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:22:12,093 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:22:12] "GET /api/history/optimized?store=AQUA&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:23:27,269 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:23:27,269 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:23:27] "GET /api/history/optimized?store=AQUA&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:23:29,874 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:23:29,875 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:23:29] "GET /api/history/optimized?start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:23:31,748 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:23:31,749 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:23:31] "GET /api/history/optimized?store=AMAN%20CROSS&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -
2025-03-17 03:23:33,711 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 492
2025-03-17 03:23:33,712 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 03:23:33] "GET /api/history/optimized?store=AQUA%20REAL%20-アクアレアル-&start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 200 -