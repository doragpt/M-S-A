(venv) root@vm-b3dba883-74:~/M-S-A# git checkout origin/main -- api_endpoints.py
(venv) root@vm-b3dba883-74:~/M-S-A# python main.py
テンプレートディレクトリ: /root/M-S-A/templates
静的ファイルディレクトリ: /root/M-S-A/static
2025-03-17 01:50:33,799 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 01:50:33,802 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 01:50:33,802 - apscheduler.scheduler - INFO - Added job "scheduled_scrape" to job store "default"
2025-03-17 01:50:33,804 - apscheduler.scheduler - INFO - Added job "<lambda>" to job store "default"
2025-03-17 01:50:33,804 - apscheduler.scheduler - INFO - Scheduler started
2025-03-17 01:50:33,804 - apscheduler.scheduler - DEBUG - Looking for jobs to run
サーバー起動時刻（JST）: 2025-03-17 01:50:33 JST+0900
2025-03-17 01:50:33,809 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-03-17 02:50:33.798823+09:00 (in 3599.989883 seconds)
アプリケーションを起動しています: http://0.0.0.0:5000
既存データ: 2942件
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Serving Flask app 'main'
 * Debug mode: on
2025-03-17 01:50:33,824 - werkzeug - INFO -  * Running on all addresses (0.0.0.0)
   WARNING: This is a development server. Do not use it in a production deployment.
 * Running on http://127.0.0.1:5000
 * Running on http://160.251.196.100:5000 (Press CTRL+C to quit)
2025-03-17 01:50:33,824 - werkzeug - INFO -  * Restarting with stat
テンプレートディレクトリ: /root/M-S-A/templates
静的ファイルディレクトリ: /root/M-S-A/static
2025-03-17 01:50:34,629 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 01:50:34,631 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-17 01:50:34,632 - apscheduler.scheduler - INFO - Added job "scheduled_scrape" to job store "default"
2025-03-17 01:50:34,633 - apscheduler.scheduler - INFO - Added job "<lambda>" to job store "default"
2025-03-17 01:50:34,633 - apscheduler.scheduler - INFO - Scheduler started
2025-03-17 01:50:34,634 - apscheduler.scheduler - DEBUG - Looking for jobs to run
サーバー起動時刻（JST）: 2025-03-17 01:50:34 JST+0900
2025-03-17 01:50:34,638 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-03-17 02:50:34.628899+09:00 (in 3599.990163 seconds)
アプリケーションを起動しています: http://0.0.0.0:5000
既存データ: 2942件
2025-03-17 01:50:34,651 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 01:50:34,654 - werkzeug - INFO -  * Debugger PIN: 452-729-233
2025-03-17 01:50:37,239 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:37] "GET / HTTP/1.1" 200 -
2025-03-17 01:50:37,498 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:37,505 - api - ERROR - APIエラー: 'sqlite3.Row' object has no attribute 'get'
2025-03-17 01:50:37,506 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:37] "GET /api/data HTTP/1.1" 500 -
2025-03-17 01:50:41,367 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:41,375 - api - ERROR - APIエラー: 'sqlite3.Row' object has no attribute 'get'
2025-03-17 01:50:41,375 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:41] "GET /api/data HTTP/1.1" 500 -
2025-03-17 01:50:44,242 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:44,252 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:44] "GET /api/store-names HTTP/1.1" 200 -
2025-03-17 01:50:44,618 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:44] "GET /api/history/optimized?start_date=2025-03-09&end_date=2025-03-16 HTTP/1.1" 400 -
2025-03-17 01:50:44,621 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:44,628 - api - ERROR - APIエラー: 'sqlite3.Row' object has no attribute 'get'
2025-03-17 01:50:44,629 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:44] "GET /api/data HTTP/1.1" 500 -
2025-03-17 01:50:45,337 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:45,363 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:45] "GET /api/area-stats HTTP/1.1" 200 -
2025-03-17 01:50:45,768 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:45,775 - api - ERROR - APIエラー: 'sqlite3.Row' object has no attribute 'get'
2025-03-17 01:50:45,775 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:45] "GET /api/data HTTP/1.1" 500 -
2025-03-17 01:50:45,859 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:45,863 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:45,865 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:45] "GET /api/ranking/genre?biz_type= キャバクラ HTTP/1.1" 200 -
2025-03-17 01:50:45,866 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:45] "GET /api/ranking/average?biz_type=キャバクラ&limit=15 HTTP/1.1" 200 -
2025-03-17 01:50:46,175 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:46,179 - app - INFO - データベース接続成功: store_statusテーブルのレコード数 = 13982
2025-03-17 01:50:46,184 - api - ERROR - APIエラー: 'sqlite3.Row' object has no attribute 'get'
2025-03-17 01:50:46,185 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:46] "GET /api/data HTTP/1.1" 500 -
2025-03-17 01:50:46,207 - werkzeug - INFO - 182.171.40.172 - - [17/Mar/2025 01:50:46] "GET /api/averages/weekly HTTP/1.1" 200 -
